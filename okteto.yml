build:
  hello-world:
    image: okteto.dev/go-hello-world:1.0.0
    context: .

deploy:
  - kubectl apply -f k8s.yml

dev:
  dev:
    autocreate: true
    image: okteto/golang:1
    command: ["/bin/bash"]
    forward:
      - 2345:2345
    services:
      - name: hello-world
        image: okteto/golang:1
        command: ["go", "run", "main.go"]
        sync:
          - .:/usr/src/app
        volumes:
          - /go
          - /root/.cache
